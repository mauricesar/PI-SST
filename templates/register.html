{% extends 'base.html' %}
{% block content %}
<section class="auth-card">
  {% if g.user and g.user.role == 'admin' %}
    <h2>Cadastrar usuários</h2>
    <p class="muted">
      Como ADM, você pode criar novas contas e escolher se serão <strong>Colaboradores</strong> ou <strong>Usuários técnicos</strong>.
    </p>
  {% else %}
    <h2>Criar conta</h2>
    <p class="muted">
      Cadastros públicos geram um perfil de <strong>Colaborador</strong>. Usuários técnicos (ADM) podem criar novas contas
      e definir o tipo quando autenticados.
    </p>
  {% endif %}
  <form method="post" class="auth-form">
    <label for="name">Nome completo</label>
    <input id="name" name="name" required placeholder="Seu nome" />

    <label for="preferred_name">Como prefere ser chamado?</label>
    <input
      id="preferred_name"
      name="preferred_name"
      required
      placeholder="Nome curto ou apelido"
    />

    <label for="email">E-mail</label>
    <input id="email" name="email" type="email" required placeholder="voce@empresa.com" />

    <label for="password">Senha</label>
    <input id="password" name="password" type="password" required placeholder="Crie uma senha" />

    {% if g.user and g.user.role == 'admin' %}
      <label for="role">Tipo de usuário</label>
      <select id="role" name="role">
        <option value="user">Colaborador</option>
        <option value="admin">Usuário técnico (ADM)</option>
      </select>
    {% endif %}

    <button type="submit">Concluir cadastro</button>
    <p class="muted center">Já tem conta? <a href="{{ url_for('login') }}">Faça login</a></p>
  </form>
</section>
{% endblock %}